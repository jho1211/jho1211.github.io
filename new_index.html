<!DOCTYPE html>
<html>
<head>
    <title>UBC CS TA Scheduler</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.3.slim.min.js" integrity="sha256-ZwqZIVdD3iXNyGHbSYdsmWP//UBokj2FHAxKuSBKDSo=" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/papaparse@5.4.0/papaparse.min.js" crossorigin="anonymous"></script>
    <link href="css/new_index.css" rel="stylesheet"></script>
</head>
<body class="bg-light full-height">
    <nav class="navbar bg-secondary">
        <div class="container-fluid text-primary">
          <a class="navbar-brand text-white fs-3" href="#">
            <img src="img/pc-display-horizontal.svg" alt="Logo" width="60" height="40" class="d-inline-block align-text-top">
            UBC CS TA Scheduler
          </a>
        </div>
    </nav>
    <div class="container mb-3 fill-height courseListContainer">
        <div class="row fill-height">
            <div class="col-3 courseList">
                <h2 class="courseListTitle">My Courses</h2>
                <div class="courseListBody">
                    <button type="button" class="courseListCourseBtn">CPSC 330</button>
                    <button type="button" class="courseListNewBtn">+ Add New Course</button>
                </div>
            </div>
            <div class="col">
                <div class="courseHelpText">
                    <h1>No course selected</h1>
                    <h2>Select or add a course on the lefthand column to get started</h2>
                </div>
                <div class="accordion mb-2" id="courseAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#courseCollapse" aria-expanded="true" aria-controls="courseCollapse">
                                <strong>Course Info</strong>
                            </button>
                        </h2>
                        <div id="courseCollapse" class="accordion-collapse collapse show" aria-labelledby="courseCollapse">
                            <div class="accordion-body">
                                <form class="needs-validation mb-3" id="courseForm" onsubmit="return false;" novalidate>
                                    <div>
                                            <label for="inputCourseName" class="form-label">Course Name:</label>
                                            <input type="text" class="form-control" placeholder="CPSC XXX" aria-label="Course Name" id="inputCourseName" required>
                                            <div class="invalid-feedback" id="courseNameFeedback">
                                                A course with that name already exists
                                            </div>
                                    </div>
                                    <div>
                                        <p class="form-label">Course Term Length: 
                                            <button type="button" class="img-btn" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Winter Term: 16 weeks, Summer Term: 8 weeks">
                                                <img src="img/question-circle-fill.svg">
                                            </button>
                                        </p>
                                        <div class="input-group">
                                            <input type="number" class="form-control" aria-label="Course Term Length" id="courseLengthInput" value="16">
                                            <span class="input-group-text">weeks</span>
                                        </div>
                                    </div>
                                    <div class="mt-2">
                                        <label for="startHour" class="form-label">Start Hour:</label>
                                        <input type="time" list="startHours" id="startHour" required>
                                        <datalist id="startHours">
                                            <option value="08:00"></option>
                                            <option value="08:30"></option>
                                            <option value="09:00"></option>
                                            <option value="09:30"></option>
                                            <option value="10:00"></option>
                                        </datalist>
                                    </div>
                                    <div>
                                        <label for="endHour" class="form-label">End Hour:&nbsp;</label>
                                        <input type="time" list="endHours" id="endHour" required>
                                        <datalist id="endHours">
                                            <option value="17:00"></option>
                                            <option value="17:30"></option>
                                            <option value="18:00"></option>
                                            <option value="18:30"></option>
                                            <option value="19:00"></option>
                                            <option value="19:30"></option>
                                            <option value="20:00"></option>
                                            <option value="20:30"></option>
                                            <option value="21:00"></option>
                                            <option value="21:30"></option>
                                            <option value="22:00"></option>
                                        </datalist>
                                    </div>
                                    <div>
                                        <label class="form-label">Days for TAs:</label>
                                        <div class="checklist-horizontal">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="Mon" id="checkMon">
                                                <label class="form-check-label" for="checkMon">
                                                    Monday
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="Tue" id="checkTue">
                                                <label class="form-check-label" for="checkTue">
                                                    Tuesday
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="Wed" id="checkWed">
                                                <label class="form-check-label" for="checkWed">
                                                    Wednesday
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="Thu" id="checkThu">
                                                <label class="form-check-label" for="checkThu">
                                                    Thursday
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="Fri" id="checkFri">
                                                <label class="form-check-label" for="checkFri">
                                                    Friday
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="Sat" id="checkSat">
                                                <label class="form-check-label" for="checkSat">
                                                    Saturday
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="Sun" id="checkSun">
                                                <label class="form-check-label" for="checkSun">
                                                    Sunday
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col">
                                            <button type="button" id="courseDeleteBtn" class="btn btn-danger float-end" hidden onclick="deleteCourse()">Delete Course</button>
                                            <button type="submit" id="courseFormSubmitBtn" class="btn btn-primary float-end">Save Course</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion mb-2" id="eventsAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#eventsCollapse" aria-expanded="true" aria-controls="eventsCollapse">
                                <strong>Course Events</strong>
                            </button>
                        </h2>
                        <div id="eventsCollapse" class="accordion-collapse collapse show" aria-labelledby="eventsCollapse">
                            <div class="accordion-body">
                                <div class="row align-items-center">
                                    <div class="col">
                                        <button class="btn btn-primary btn-events float-end" data-bs-toggle="modal" data-bs-target="#bulkEventModal">
                                            Bulk Events Upload (Recommended)
                                        </button>
                                    </div>
                                    <div class="col-auto">
                                        <h3>OR</h1>
                                    </div>
                                    <div class="col">
                                        <button class="btn btn-secondary btn-events" data-bs-toggle="modal" data-bs-target="#newEventModal" onclick="openNewEvent()">
                                            Manually Add Events
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion mb-2" id="tasAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#eventsCollapse" aria-expanded="true" aria-controls="tasCollapse">
                                <strong>TA Availability Schedules</strong>
                            </button>
                        </h2>
                        <div id="tasCollapse" class="accordion-collapse collapse show" aria-labelledby="tasCollapse">
                            <div class="accordion-body">
                                <div class="row align-items-center">
                                    <div class="col">
                                        <button class="btn btn-primary btn-events float-end">
                                            Bulk TAs Upload (Recommended)
                                        </button>
                                    </div>
                                    <div class="col-auto">
                                        <h3>OR</h1>
                                    </div>
                                    <div class="col">
                                        <button class="btn btn-secondary btn-events">
                                            Manually Add TAs
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="eventsDiv">
                    <div class="eventCalendarText mb-3">
                        <h1>Event Calendar</h1>
                        <div>
                            <button type="button" id="newEventBtn" class="btn btn-lg btn-new-event me-4" onclick="clearAssignments()">
                                <img src="img/arrow-counterclockwise.svg" width="26" height="26"> Clear Assignments
                            </button>
                            <button type="button" id="newEventBtn" class="btn btn-lg btn-new-event me-4" onclick="autoSchedule()">
                                <img src="img/android2.svg" width="26" height="26"> Auto Schedule TAs
                            </button>
                            <button type="button" id="newEventBtn" class="btn btn-lg btn-new-event" data-bs-toggle="modal" data-bs-target="#newEventModal" onclick="openNewEvent()">
                                <img src="img/plus-circle.svg" width="26" height="26"> New Event
                            </button>
                        </div>
                    </div>
                    <div class="eventCalLegend">
                        <p>
                            <img src="img/person-fill-check.svg" width="60px" height="30px"> All TAs Filled
                            <img src="img/person-fill-add.svg" width="60px" height="30px"> More TAs Required
                            <img src="img/person-fill-dash.svg" width="60px" height="30px"> No TAs Available
                        </p>
                    </div>
                    <table class="table text-white table-bordered" style="table-layout: fixed" id="eventCalendar">
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="bulkEventModal" tabindex="-1" aria-labelledby="bulkEventModal" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">Bulk Events Upload (Recommended)</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>
                    The uploaded file must be in CSV format wtih the following columns:<br><br>
                    Event name, Event type, Event day (DDD), Start time (24 hour clock), Duration (min), Num weeks, Location, Number of TAs required, Description (optional)
                </p>
                <a href="example/testUploadEvents.csv">Download Example</a>
                <input type="file" class="form-control mt-3" id="bulkAddEventsFileInput" accept=".csv">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
              <!--If the user presses confirm and there is a file uploaded, then the events are read and saved-->
              <button type="button" class="btn btn-primary" onclick="readBulkEvents()">Confirm</button>
            </div>
          </div>
        </div>
      </div>

    <div class="modal fade" id="newEventModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <form id="newEventForm" onsubmit="return false;">
                    <div class="modal-header">
                        <div class="row">
                            <div class="col-12">
                                <div class="input-group">
                                    <span class="input-group-text"><b>Event Name</b></span>
                                    <input type="text" class="form-control form-control-sm" placeholder="Office Hours" aria-label="Event Name Input" id="newEventNameInput" required>
                                </div>
                            </div>
                        </div>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="input-group input-group-sm mb-2">
                            <span class="input-group-text">Event Type</span>
                            <select class="form-select form-select-sm" id="newEventTypeSelect" required>
                                <option value="Lecture">Lecture</option>
                                <option value="Lab">Lab</option>
                                <option value="Tutorial">Tutorial</option>
                                <option value="Office Hours">Office Hours</option>
                                <option value="Piazza">Piazza</option>
                                <option value="Lecture">Meeting</option>
                                <option value="Curriciulum Dev">Development</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="input-group input-group-sm mb-2">
                            <span class="input-group-text">Event Day</span>
                            <select class="form-select form-select-sm" id="newEventDaySelect" required>
                                <option value="Mon">Monday</option>
                                <option value="Tue">Tuesday</option>
                                <option value="Wed">Wednesday</option>
                                <option value="Thu">Thursday</option>
                                <option value="Fri">Friday</option>
                                <option value="Sat">Saturday</option>
                                <option value="Sun">Sunday</option>
                            </select>
                        </div>
                        <div class="input-group input-group-sm mb-2">
                            <span class="input-group-text">Start Time</span>
                            <input type="time" class="form-control form-control-sm" aria-label="Start Time Input" id="newEventStartTimeInput" required>
                        </div>
                        <div class="input-group input-group-sm mb-2">
                            <span class="input-group-text">Duration</span>
                            <input type="number" class="form-control form-control-sm" aria-label="Duration Input" id="newEventEndTimeInput" aria-describedby="basic-addon2" required>
                            <span class="input-group-text" id="basic-addon2">minutes</span>
                        </div>
                        <div class="input-group input-group-sm mb-2">
                            <span class="input-group-text">Event Length</span>
                            <input type="number" class="form-control form-control-sm" aria-label="Number of weeks input" id="newEventLengthInput" aria-describedby="basic-addon2" required>
                            <span class="input-group-text" id="basic-addon2">weeks</span>
                        </div>
                        <div class="input-group input-group-sm mb-2">
                            <span class="input-group-text">Location</span>
                            <input type="text" class="form-control form-control-sm" aria-label="Location Input" id="newEventLocInput">
                        </div>
                        <div class="input-group input-group-sm mb-2">
                            <span class="input-group-text">TAs Required</span>
                            <input type="number" class="form-control form-control-sm" aria-label="Number of TAs Input" id="newEventTARequiredInput" aria-describedby="basic-addon2" required>
                            <span class="input-group-text" id="basic-addon2">TAs</span>
                        </div>
                        <div class="input-group input-group-sm mb-2">
                            <span class="input-group-text">Description</span>
                            <textarea class="form-control" id="newEventDescriptionInput" row="3"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div>
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>